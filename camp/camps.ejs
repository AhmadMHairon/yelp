<%- layout("layout/boilerplate.ejs") %>

  <div id='map' style='width: 100%; height: 300px;'></div>

  <h1>ALL CAMPS</h1>




  <% for (let x of campgrounds){ %>
    <div class="card mb-3">
      <div class="row g-0">
        <div class="col-md-4">
          <% if (x.image.length){ %>
            <img src="<%=x.image[0].url%>" class="img-fluid" alt="...">
            <% }else{ %>
              <img src="https://res.cloudinary.com/dewymkk4h/image/upload/v1616503002/YelpCamp/pdajasbfwyls1rfc954d.png"
                class="img-fluid" alt="...">
              <% } %>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">
              <%= x.title %>
            </h5>
            <p class="card-text">
              <%= x.description %>
            </p>
            <p class="card-text"><small class="text-muted">
                <%= x.location %>
              </small></p>
            <a href="/camps/<%= x.id %>" class="btn btn-primary">Click Here to View</a>
          </div>
        </div>
      </div>
    </div>
    <% } %>



      <script>
      const mapToken = '<%- process.env.MAPBOX_TOKEN%>';
      const camps = {features: <%- JSON.stringify(campgrounds)%>};
      //must have save-format off to make this work. furthermore, there is a way to wrap it up in '' or `` (must not use "") and then parse it over the next page. 
      //this method however is BAD. because if the title or location or anything had a single quote, a `, or a " then this will crash.
      //so the safe course of action is just to remove format and deal with this 
      </script>


      <script src="/javascripts/cluster.js"></script>

